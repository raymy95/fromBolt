import{s as L,n as M,o as Q,a as O,r as R}from"../chunks/DyjBc6Js.js";import{S as W,i as X,d as g,o as Y,a as S,m as d,c as b,e as I,g as U,q as H,h as v,j as D,s as P,b as _,f as x,t as B,k as G,l as j,n as q}from"../chunks/DI51QYyl.js";import{e as z,s as N}from"../chunks/CR7VxdKE.js";import{g as Z}from"../chunks/B8QFiqg4.js";function A(c,t,e){const a=c.slice();return a[10]=t[e],a}function $(c){let t,e="Unlock Card",a,o;function r(){return c[7](c[10])}return{c(){t=v("button"),t.textContent=e,this.h()},l(s){t=b(s,"BUTTON",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-d58w64"&&(t.textContent=e),this.h()},h(){d(t,"class","mt-2 w-full py-2 px-4 bg-indigo-600 text-white rounded hover:bg-indigo-700")},m(s,l){S(s,t,l),a||(o=j(t,"click",r),a=!0)},p(s,l){c=s},d(s){s&&g(t),a=!1,o()}}}function ee(c){let t,e=c[10].description+"",a;return{c(){t=v("p"),a=B(e),this.h()},l(o){t=b(o,"P",{class:!0});var r=I(t);a=x(r,e),r.forEach(g),this.h()},h(){d(t,"class","text-gray-600")},m(o,r){S(o,t,r),_(t,a)},p(o,r){r&1&&e!==(e=o[10].description+"")&&P(a,e)},d(o){o&&g(t)}}}function F(c){let t,e,a,o,r,s,l,u,n=c[10].name+"",m,E,y,h;function T(i,f){return f&3&&(y=null),y==null&&(y=!!i[1].has(i[10].id)),y?ee:$}let k=T(c,-1),p=k(c);return{c(){t=v("div"),e=v("img"),s=D(),l=v("div"),u=v("h3"),m=B(n),E=D(),p.c(),h=D(),this.h()},l(i){t=b(i,"DIV",{class:!0});var f=I(t);e=b(f,"IMG",{src:!0,alt:!0,class:!0}),s=U(f),l=b(f,"DIV",{class:!0});var w=I(l);u=b(w,"H3",{class:!0});var C=I(u);m=x(C,n),C.forEach(g),E=U(w),p.l(w),w.forEach(g),h=U(f),f.forEach(g),this.h()},h(){O(e.src,a=c[10].image_url)||d(e,"src",a),d(e,"alt",o=c[10].name),d(e,"class",r="w-full h-48 object-cover "+(c[1].has(c[10].id)?"":"filter blur-lg")),d(u,"class","text-lg font-semibold"),d(l,"class","p-4"),d(t,"class","relative bg-white rounded-lg shadow-md overflow-hidden")},m(i,f){S(i,t,f),_(t,e),_(t,s),_(t,l),_(l,u),_(u,m),_(l,E),p.m(l,null),_(t,h)},p(i,f){f&1&&!O(e.src,a=i[10].image_url)&&d(e,"src",a),f&1&&o!==(o=i[10].name)&&d(e,"alt",o),f&3&&r!==(r="w-full h-48 object-cover "+(i[1].has(i[10].id)?"":"filter blur-lg"))&&d(e,"class",r),f&1&&n!==(n=i[10].name+"")&&P(m,n),k===(k=T(i,f))&&p?p.p(i,f):(p.d(1),p=k(i),p&&(p.c(),p.m(l,null)))},d(i){i&&g(t),p.d()}}}function J(c){let t,e,a,o="Unlock Card",r,s,l,u,n,m,E="Cancel",y,h,T="Unlock",k,p,i=c[5]&&K(c);return{c(){t=v("div"),e=v("div"),a=v("h3"),a.textContent=o,r=D(),s=v("input"),l=D(),i&&i.c(),u=D(),n=v("div"),m=v("button"),m.textContent=E,y=D(),h=v("button"),h.textContent=T,this.h()},l(f){t=b(f,"DIV",{class:!0});var w=I(t);e=b(w,"DIV",{class:!0});var C=I(e);a=b(C,"H3",{class:!0,"data-svelte-h":!0}),q(a)!=="svelte-14m62yq"&&(a.textContent=o),r=U(C),s=b(C,"INPUT",{type:!0,placeholder:!0,class:!0}),l=U(C),i&&i.l(C),u=U(C),n=b(C,"DIV",{class:!0});var V=I(n);m=b(V,"BUTTON",{class:!0,"data-svelte-h":!0}),q(m)!=="svelte-l10mmb"&&(m.textContent=E),y=U(V),h=b(V,"BUTTON",{class:!0,"data-svelte-h":!0}),q(h)!=="svelte-1gkfb3c"&&(h.textContent=T),V.forEach(g),C.forEach(g),w.forEach(g),this.h()},h(){d(a,"class","text-xl font-bold mb-4"),d(s,"type","password"),d(s,"placeholder","Enter password"),d(s,"class","w-full p-2 border rounded mb-4"),d(m,"class","px-4 py-2 text-gray-600 hover:text-gray-800"),d(h,"class","px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"),d(n,"class","flex justify-end space-x-4"),d(e,"class","bg-white p-6 rounded-lg max-w-md w-full"),d(t,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center")},m(f,w){S(f,t,w),_(t,e),_(e,a),_(e,r),_(e,s),G(s,c[4]),_(e,l),i&&i.m(e,null),_(e,u),_(e,n),_(n,m),_(n,y),_(n,h),k||(p=[j(s,"input",c[8]),j(m,"click",c[9]),j(h,"click",c[6])],k=!0)},p(f,w){w&16&&s.value!==f[4]&&G(s,f[4]),f[5]?i?i.p(f,w):(i=K(f),i.c(),i.m(e,u)):i&&(i.d(1),i=null)},d(f){f&&g(t),i&&i.d(),k=!1,R(p)}}}function K(c){let t,e;return{c(){t=v("p"),e=B(c[5]),this.h()},l(a){t=b(a,"P",{class:!0});var o=I(t);e=x(o,c[5]),o.forEach(g),this.h()},h(){d(t,"class","text-red-500 text-sm mb-4")},m(a,o){S(a,t,o),_(t,e)},p(a,o){o&32&&P(e,a[5])},d(a){a&&g(t)}}}function te(c){let t,e,a,o=z(c[0]),r=[];for(let l=0;l<o.length;l+=1)r[l]=F(A(c,o,l));let s=c[2]&&J(c);return{c(){t=v("div");for(let l=0;l<r.length;l+=1)r[l].c();e=D(),s&&s.c(),a=H(),this.h()},l(l){t=b(l,"DIV",{class:!0});var u=I(t);for(let n=0;n<r.length;n+=1)r[n].l(u);u.forEach(g),e=U(l),s&&s.l(l),a=H(),this.h()},h(){d(t,"class","grid grid-cols-1 md:grid-cols-3 gap-6")},m(l,u){S(l,t,u);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(t,null);S(l,e,u),s&&s.m(l,u),S(l,a,u)},p(l,[u]){if(u&15){o=z(l[0]);let n;for(n=0;n<o.length;n+=1){const m=A(l,o,n);r[n]?r[n].p(m,u):(r[n]=F(m),r[n].c(),r[n].m(t,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}l[2]?s?s.p(l,u):(s=J(l),s.c(),s.m(a.parentNode,a)):s&&(s.d(1),s=null)},i:M,o:M,d(l){l&&(g(t),g(e),g(a)),Y(r,l),s&&s.d(l)}}}function le(c,t,e){let a=[],o=new Set,r=!1,s=null,l="",u="";Q(async()=>{const h=localStorage.getItem("username");if(!h){const p=localStorage.getItem("token");Z(`/?token=${p}`);return}const{data:T}=await N.from("cards").select("*"),{data:k}=await N.from("user_cards").select("card_id").eq("username",h);e(0,a=T||[]),e(1,o=new Set((k==null?void 0:k.map(p=>p.card_id))||[]))});async function n(){if(s)if(l===s.unlock_password){const h=localStorage.getItem("username");await N.from("user_cards").insert({username:h,card_id:s.id}),o.add(s.id),e(1,o),e(2,r=!1),e(4,l=""),e(5,u="")}else e(5,u="Incorrect password")}const m=h=>{e(3,s=h),e(2,r=!0)};function E(){l=this.value,e(4,l)}return[a,o,r,s,l,u,n,m,E,()=>{e(2,r=!1),e(4,l=""),e(5,u="")}]}class oe extends W{constructor(t){super(),X(this,t,le,te,L,{})}}export{oe as component};
